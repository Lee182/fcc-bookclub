{"version":3,"sources":["webpack:///webpack/bootstrap 0f0dbceed9d9dbb9919f","webpack:///./shared/eventSystem.js","webpack:///./server/keys.coffee","webpack:///./server/index.js","webpack:///external \"http\"","webpack:///external \"path\"","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"login-with-twitter\"","webpack:///external \"google-books-search\"","webpack:///external \"uws\"","webpack:///external \"mongodb\"","webpack:///external \"curl\""],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0f0dbceed9d9dbb9919f","module.exports = function () {\n  var events = {}\n  var eventsystem = {\n    on: function (id, fn) {\n      events[id] = events[id] || []\n      events[id].push(fn)\n    },\n    off: function (id, fn) {\n      if (events[id] === undefined) { return }\n      var i = events[id].findIndex(function (g) {\n        return g = fn\n      })\n      if (i !== -1) {\n        events[id].splice(i, 1)\n      }\n    },\n    emit: function (id, data) {\n      if (events[id]) {\n        events[id].forEach(function (fn) {\n          fn(data)\n        })\n      }\n    }\n  }\n  eventsystem.events = events\n  return eventsystem\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./shared/eventSystem.js\n// module id = 0\n// module chunks = 0","curl = require('curl')\n\nmodule.exports = (ip) ->\n  url = 'http://ipinfo.io/' + ip + '/json'\n  console.log 'ip', ip\n  if (\n    ip == '::1' or\n    ip == '127.0.0.1' or\n    ip == undefined or\n    ip.match(/^\\:\\:/) != null\n  )\n    url = 'http://ipinfo.io/json'\n  \n  new Promise (resolve, reject) ->\n    curl.getJSON url, {}, (err, response, data) ->\n      #console.log(data)\n      if err\n        return reject(err)\n      [lat, lon] = data.loc.split(',')\n      loci =\n        name: \"\"\"\n          #{data.city}, #{data.region}, #{data.country}`\n        \"\"\"\n        coords: { lat, lon }\n        address:\n          city: data.city\n          region: data.region\n          country_code: data.country.toLowerCase()\n      resolve loci\n\n\n// WEBPACK FOOTER //\n// ./server/keys.coffee","// Generated by CoffeeScript 2.0.1\nvar app, body_parser_json, bookapi, cookie_parser, dao, port, server, tw, ws;\n\nimport http from 'http';\n\nimport path from 'path';\n\nimport express from 'express';\n\nimport bodyParser from 'body-parser';\n\nimport cookieParser from 'cookie-parser';\n\nimport express_user from 'server/express/user.coffee';\n\nimport express_book from 'server/express/book.coffee';\n\nimport ws_handle from 'server/ws/index.coffee';\n\nimport k from 'server/keys.coffee';\n\nimport db from 'server/db.coffee';\n\napp = express();\n\nserver = http.Server(app);\n\nport = process.argv[2] || 3000;\n\ncookie_parser = cookieParser();\n\nbody_parser_json = bodyParser.json();\n\ndao = new db({\n  mongourl: k.mongourl\n});\n\napp.use(cookie_parser);\n\napp.use(body_parser_json);\n\napp.use('/', express.static(path.resolve(__dirname + '/dist')));\n\ntw = express_user({ app, port, dao, k, 'bookclub_sessions': 'bookclub_sessions' });\n\nbookapi = express_book({ app, dao });\n\nws = ws_handle({ app, server, cookie_parser, tw, dao });\n\napp.get('*', function (req, res) {\n  return res.sendFile(path.resolve(__dirname + '/dist/index.html'));\n});\n\ndao.connect().then(function () {\n  return server.listen(port, function () {\n    return console.log('server listening at http://localhost:' + port);\n  });\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbInNlcnZlci9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsT0FBQSxBQUFPLFVBQVA7O0FBQ0EsT0FBQSxBQUFPLFVBQVA7O0FBQ0EsT0FBQSxBQUFPLGFBQVA7O0FBQ0EsT0FBQSxBQUFPLGdCQUFQOztBQUNBLE9BQUEsQUFBTyxrQkFBUDs7QUFDQSxPQUFBLEFBQU8sa0JBQVA7O0FBQ0EsT0FBQSxBQUFPLGtCQUFQOztBQUNBLE9BQUEsQUFBTyxlQUFQOztBQUNBLE9BQUEsQUFBTyxPQUFQOztBQUNBLE9BQUEsQUFBTyxRQUFQOztBQUVBLE1BQU07O0FBQ04sU0FBUyxBQUFJLEtBQUosQUFBSyxPQUFMLEFBQVk7O0FBQ3JCLE9BQU8sQUFBTyxRQUFDLEFBQUssS0FBYixBQUFhLE1BQU07O0FBQzFCLGdCQUFnQjs7QUFDaEIsbUJBQW1CLEFBQVUsV0FBVixBQUFXOztBQUU5QixVQUFNLEFBQUk7QUFBSyxZQUFVLEFBQUMsRUFBcEIsQUFBTyxBQUFjO0FBQWQsQ0FBUDs7QUFDTixBQUFHLElBQUgsQUFBSSxJQUFKLEFBQVE7O0FBQ1IsQUFBRyxJQUFILEFBQUksSUFBSixBQUFROztBQUNSLEFBQUcsSUFBSCxBQUFJLElBQUosQUFBUSxLQUFLLEFBQU8sUUFBUCxBQUFRLE9BQU8sQUFBSSxLQUFKLEFBQUssUUFBUSxZQUF6QyxBQUFhLEFBQWUsQUFBeUI7O0FBRXJELEtBQUssYUFBYSxFQUFBLEFBQUUsS0FBRixBQUFPLE1BQVAsQUFBYSxLQUFiLEFBQWtCLEdBQUcscUJBQWxDLEFBQWEsQUFBcUI7O0FBQ3ZDLFVBQVUsYUFBYSxFQUFBLEFBQUUsS0FBZixBQUFhLEFBQU87O0FBQzlCLEtBQUssVUFBVSxFQUFBLEFBQUUsS0FBRixBQUFPLFFBQVAsQUFBZSxlQUFmLEFBQThCLElBQXhDLEFBQVUsQUFBa0M7O0FBRWpELEFBQUcsSUFBSCxBQUFJLElBQUosQUFBUSxLQUFLLFVBQUEsQUFBQyxLQUFELEFBQU07U0FDakIsQUFBRyxJQUFILEFBQUksU0FBUyxBQUFJLEtBQUosQUFBSyxRQUFRLFlBRGYsQUFDWCxBQUFhLEFBQXlCO0FBRHhDOztBQUdBLEFBQUcsSUFBSCxBQUFJLEFBQVMsVUFBYixBQUFjLEtBQUs7Z0JBQ2pCLEFBQU8sT0FBUCxBQUFjLE1BQU07V0FDbEIsQUFBTyxRQUFQLEFBQVEsSUFBSSwwQ0FETSxBQUNsQixBQUFzRDtBQUZ2QyxBQUNqQixHQUFBLEFBQU07QUFEUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBodHRwICBmcm9tICdodHRwJ1xuaW1wb3J0IHBhdGggIGZyb20gJ3BhdGgnXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInXG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInXG5pbXBvcnQgZXhwcmVzc191c2VyIGZyb20gJy4vZXhwcmVzcy91c2VyJ1xuaW1wb3J0IGV4cHJlc3NfYm9vayBmcm9tICcuL2V4cHJlc3MvYm9vaydcbmltcG9ydCB3c19oYW5kbGUgZnJvbSAnLi93cy9pbmRleCdcbmltcG9ydCBrICBmcm9tICcuL2tleXMnXG5pbXBvcnQgZGIgZnJvbSAnLi9kYidcblxuYXBwID0gZXhwcmVzcygpXG5zZXJ2ZXIgPSBodHRwLlNlcnZlcihhcHApXG5wb3J0ID0gcHJvY2Vzcy5hcmd2WzJdIG9yIDMwMDBcbmNvb2tpZV9wYXJzZXIgPSBjb29raWVQYXJzZXIoKVxuYm9keV9wYXJzZXJfanNvbiA9IGJvZHlQYXJzZXIuanNvbigpXG5cbmRhbyA9IG5ldyBkYih7IG1vbmdvdXJsOiBrLm1vbmdvdXJsIH0pXG5hcHAudXNlIGNvb2tpZV9wYXJzZXJcbmFwcC51c2UgYm9keV9wYXJzZXJfanNvblxuYXBwLnVzZSAnLycsIGV4cHJlc3Muc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUgKyAnLy4uL2Rpc3QnKSlcblxudHcgPSBleHByZXNzX3VzZXIoeyBhcHAsIHBvcnQsIGRhbywgaywgJ2Jvb2tjbHViX3Nlc3Npb25zJyB9KVxuYm9va2FwaSA9IGV4cHJlc3NfYm9vayh7IGFwcCwgZGFvIH0pXG53cyA9IHdzX2hhbmRsZSh7IGFwcCwgc2VydmVyLCBjb29raWVfcGFyc2VyLCB0dywgZGFvIH0pXG5cbmFwcC5nZXQgJyonLCAocmVxLCByZXMpIC0+XG4gIHJlcy5zZW5kRmlsZSBwYXRoLnJlc29sdmUoX19kaXJuYW1lICsgJy8uLi9kaXN0L2luZGV4Lmh0bWwnKVxuXG5kYW8uY29ubmVjdCgpLnRoZW4gLT5cbiAgc2VydmVyLmxpc3RlbiBwb3J0LCAtPlxuICAgIGNvbnNvbGUubG9nICdzZXJ2ZXIgbGlzdGVuaW5nIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6JyArIHBvcnQiXX0=\n//# sourceURL=/home/lee/jono/web-projects/fcc-b-bookclub/server/index.coffee\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/index.js\n// module id = 2\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"login-with-twitter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"login-with-twitter\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"google-books-search\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"google-books-search\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"uws\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uws\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"curl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"curl\"\n// module id = 21\n// module chunks = 0"],"sourceRoot":""}